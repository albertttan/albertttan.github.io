<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../../daily-bulletin/files/styles.css">
	<title>Daisyworld</title>
	<style>
td.left {
	text-align: left;
}
h1 {
	color: rgb(0, 172, 240);
}
a:link, a:visited, a:hover, a:active {
	color: rgb(0, 172, 240);
}
	</style>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<header>
	<p style="margin-bottom: 0px"><b>Intellectual Challenge: Equilibrium</b></p>
	<h1 style="
	margin: 0px">Daisyworld Simulation</h1>
	<p>Albert Tan</p>
</header>
<article>
	<h2>Introduction and Applications</h2>
	<img class="embed" src="daisyworld-overview.webp" alt="Overview of Daisyworld" title="Overview of Daisyworld">
	<p>Nuclear fusion in the sun causes its core to contract and heat up slightly as its helium content increases. As the result, energy production from the sun's core increases, energy emitted at the surface of the sun increases, and the sun appears brighter. In fact, when the Sun first formed 4.6 billion years ago, it should have been about 30% less luminous than it is today. This means that if all other factors had remained constant, the early Earth should have been colder than it is today, being ice-covered prior to 2 billion years ago.</p>
	<p>However, this isn't the case. Sedimentary rock evidences prove that liquid water has existed on Earth's surface for at least the last 3.8 billion years. This apparent discrepancy is called the "faint young Sun paradox." The most likely explanation is that the level of greenhouse gases in Earth's primitive atmosphere was significantly higher; as solar luminosity gradually increases, the level of greenhouse gases gradually decreases, keeping the temperature of the earth in a rough equilibrium.</p> 
	<p>Why should this have been true? What caused the change in greenhouse gas concentration? The Daisyworld is a hypothetical model to show how self-regulation and interaction between systems automatically created such long-term climate equilibrium on a planet, and how this equilibrium might eventually shatter when the external changes become too significant.</p>
	<p>White daisies grow on the dark soil of Daisyworld. As we all know, brighter surfaces reflect more heat since they have a higher albedo (the proportion of the incident light or radiation that is reflected by a surface), and vice versa; if there are more daisies on the surface of Daisyworld, the temperature in Daisyworld will be lower.</p>
	<p>The growth of daisies, however, is also controlled by temperature, like any other regular organism. There is an optimum temperature in which daisies grow at the fastest rate; as temperature moves away from the optimum temperature, the growth rate of daisies decrease, until at some point the planet is too cold or too hot to sustain any extra daisies.</p>
	<p>The system seems quite fragile to disturbances at first glance: any significant change in daisy coverage would result in a significant change in temperature, and any significant change in temperature would result in a significant change in daisy coverage. In reality, these factors can manage to work together to keep the Daisyworld in an equilibrium for a relatively long period of time, just like how Earth managed to regulate itself for more than 4 billion years.</p>
	<p>However, we will eventually observe the fall of the equilibrium as the forcing (persistent disturbance of a system), or the change in solar luminosity in this case, becomes too much. This outlines the potential threat faced by the Earth in the far future.</p>


	<h2>Simulation</h2>

	<h3>Variables</h3>
	<table>
		<thead>
			<th scope="col">Variable</th>
			<th scope="col">Default</th>
			<th scope="col">Unit</th>
			<th scope="col">Meaning</th>
		</thead>
		<tbody>
			<tr>
				<td>\(T\)<br><var>maxt</var></td>
				<td>100</td>
				<td>Billion Years</td>
				<td class="left">Maximum time of the simulation. A higher value allows you to observe changes in Daisyworld for a longer time period.</td>
			</tr>
			<tr>
				<td>\(s\)<br><var>side</var></td>
				<td>360</td>
				<td>Pixels</td>
				<td class="left">Sidelength of the planet of Daisyworld. A higher value means slower simulation but relatively more precise and reliable results.</td>
			</tr>
			<tr>
				<td>\(\theta_O\)<br><var>optm</var></td>
				<td>290</td>
				<td>Kelvins</td>
				<td class="left">Optimum temperature of daisies, or the temperature at which the speed of daisy growth is at its fastest possible.</td>
			</tr>
			<tr>
				<td>\(\theta_\max - \theta_\min\)<br><var>rnge</var></td>
				<td>20</td>
				<td>Kelvins</td>
				<td class="left">Range of acceptable temperature of daisies, or the difference between maximum and minimum temperature that allows the survival of any daisies.</td>
			</tr>
			<tr>
				<td>\(a_d\)<br><var>albd</var></td>
				<td>70</td>
				<td>%</td>
				<td class="left">Albedo of the daisies, or percentage of incoming solar radiation reflected back to the universe by the white daisies.</td>
			</tr>
			<tr>
				<td>\(a_g\)<br><var>albg</var></td>
				<td>30</td>
				<td>%</td>
				<td class="left">Albedo of the ground, or percentage of incoming solar radiation reflected back to the universe by the gray soil.</td>
			</tr>
			<tr>
				<td>\(l_0\)<br><var>lum0</var></td>
				<td>335</td>
				<td>Kelvins</td>
				<td class="left">Initial solar luminosity, measured as the equivalent temperature the planet would have if it absorbed all the incoming radiation.</td>
			</tr>
			<tr>
				<td>\(\Delta l\)<br><var>dlum</var></td>
				<td>9</td>
				<td>% per Billion&nbsp;Year</td>
				<td class="left">Rate of increase of solar luminosity. A higher value speeds the simulation up.</td>
			</tr>
			<tr>
				<td>\(B\)<br><var>brte</var></td>
				<td>10</td>
				<td>%</td>
				<td class="left">Birth rate of daisies. If a pixel meets the requirement to become a new daisy, this is the chance that the daisy will spread to that pixel. A higher value means that daisies are more sensitive to temperature changes, which can also mean more irregular fluctuations in daisy coverage.</td>
			</tr>
			<tr>
				<td>\(D\)<br><var>drte</var></td>
				<td>10</td>
				<td>%</td>
				<td class="left">Death rate of daisies. If a pixel meets the requirement to become a pixel of gray soil again, this is the chance that the daisy will actually die. A higher value means that daisies are more sensitive to temperature changes, which can also mean more irregular fluctuations in daisy coverage.</td>
			</tr>
			<tr>
				<td>\(R\)<br><var>rrte</var></td>
				<td>5</td>
				<td>%</td>
				<td class="left">Random generation rate of daisies. If a pixel meets the requirement to grow a new daisy but does not have neighboring daisies, this is the chance that a daisy will randomly spawn. A higher value means that daisies are less sensitive to density.</td>
			</tr>
			<tr>
				<td>\(t\)</td>
				<td rowspan=9>(varies)</td>
				<td>50 Million Years</td>
				<td class="left">Round of simulation</td>
			</tr>
			<tr>
				<td>\(\theta_t\)</td>
				<td>Kelvins</td>
				<td class="left">Temperature in Daisyworld in round \(t\)</td>
			</tr>
			<tr>
				<td>\(l_t\)</td>
				<td>Kelvins</td>
				<td class="left">Kelvin equivalent of solar luminosity in round \(t\)</td>
			</tr>
			<tr>
				<td>\(d_t\)</td>
				<td>%</td>
				<td class="left">Daisy coverage in round \(t\)</td>
			</tr>
			<tr>
				<td>\(a_t\)</td>
				<td>%</td>
				<td class="left">Average albedo in round \(t\)</td>
			</tr>
			<tr>
				<td>\(G_\theta\)</td>
				<td>%</td>
				<td class="left">Growth rate under temperature \(\theta\)</td>
			</tr>
			<tr>
				<td>\(C_{B, t}\)</td>
				<td>%</td>
				<td class="left">Chance of a daisy to grow through spreading in round \(t\)</td>
			</tr>
			<tr>
				<td>\(C_{R, t}\)</td>
				<td>%</td>
				<td class="left">Chance of a daisy to grow through random generation in round \(t\)</td>
			</tr>
			<tr>
				<td>\(C_{D, t}\)</td>
				<td>%</td>
				<td class="left">Chance of a daisy to die in round \(t\)</td>
			</tr>
		</tbody>
	</table>
	<p>The table offers an overview of key variables that determine the outcomes of the simulation. Some can be adjusted through the "Settings" interface, allowing you to explore different outcomes of Daisyworld under different conditions.</p>

	<h3>Functions and Graphs</h3>
	<img class="embed" src="daisyworld-graphs.webp" alt="Graphs for Daisyworld" title="Graphs for Daisyworld">
	<p>The rate of growth of daisies at a time is determined by the temperature. Two functions illustrate the relations.</p>
	<p>The control of temperature on the growth of daisies is roughly a quadratic relation. The vertex shows the optimum temperature and the respective growth rate, and the x-intercepts show the points where the planet is too cold or too hot to sustain any extra daisies.</p>
	<p>The control of daisy coverage on temperature, meanwhile, is linear. The higher the daisy coverage, the higher the average albedo, the greater the percentage of solar radiation reflected from the surface, the lower the temperature of the planet.</p>
	<p>If we graph the inverse of the linear function along with the quadratic function, we can observe two intersections, \(P_1\) and \(P_2\). These points of intersection are special because they represent the only states of the system that simultaneously fall on the curves showing both the effect that white-daisy coverage has on surface temperature and the effect that surface temperature has on white-daisy coverage. We can say that the system is in equilibrium. If the system is already in one of these states, it will remain there unless something disturbs it.</p>
	<p>Unfortunately, disturbances do occur in the system: the increasing solar luminosity, which should result in an increase surface temperatures in Daisyworld, or \(\Delta T_0\) to the right. Suppose we are at \(P_1\). Daisyworld responds by increasing the daisy coverage to \(P_1'\); the increase in daisy coverage causes a slight decrease in the temperature, \(\Delta T_f\), due to the increased overall albedo of the planet. The overall temperature increase is limited to \(\Delta T_{eq}\) instead. Daisyworld is able to stabalize the increase and help the system remain in the equilibrium. Since temperature increase encourages daisy growth and daisy growth inhibits temperature increase, we can say that the system controls itself through a negative feedback loop. The equilibrium is thus a stable equilibrium, or one that the system will still return to after being disturbed.</p>
	<p>\(P_2\) is another case. Here, temperature increase inhibits daisy growth since the real temperature is higher than the optimum temperature. Daisy growth still inhibits temperature increase, so there is a positive feedback loop amplifying the temperature increase. \(P_2'\) thus represents an unstable equilibrium; the system will remain in its current state if no disturbances are present, but any small disturbance will carry the system to another different state.</p>

	<h3>Modelling</h3>
	<p>The daisy coverage can thus be simulated based on the variables and rules defined above. The program loops through consecutive rounds of 50 million years, \(t\), until \(T\) is reached, continuously calculating and recording the daisy coverage and temperature.</p>
	<p>In each round, we first calculate the temperature \(\theta\) as what remains of the current solar luminosity, \(l_t\), after some radiation is reflected, the amount of which depends on the current average albedo, \(a_t\).</p>
	<p>\[\theta_t = l_t (100\% - a_t)\]</p>
	<p>The current solar luminosity measured in the equivalent temperature of the planet, \(l_t\), can be calculated based on the last recorded luminosity, \(l_{t-1}\), and \(\Delta l\). The current average albedo of the planet, \(a_t\), based on the daisy coverage in the last round \(d_{t-1}\), the albedo of the daisies \(a_d\), and the albedo of the ground \(a_g\).</p>
	<p>\[l_t = l_{t-1} \Delta l\]
	\[a_t = a_d d_{t-1} + a_g (100\% - d_{t-1})\]</p>
	<p>We then iterate through each grid twice, once to determine whether a new daisy will grow in an empty pixel, next to determine whether a grown daisy will die and get removed. The growth rate of daisies, which is determined by temperature through the quadratic optimum temperature curve, controls daisy generation as a percentage of the maximum rate at the optimum temperature. Simplifying the quadratic function, we can observe how the raw growth rate \(G\) at temperature \(\theta\) can be obtained from the values of \(\theta_O\) and \(\theta_\max\) or \(\theta_\min\) as:</p>
	<p>\[G_\theta = 1 - \frac{(\theta - \theta_O)^2}{(\theta_\max - \theta_O)^2}\] </p>
	<p>A daisy might spread to a nearby empty pixel from an existing daisy. For each of the four grids near an existing daisy, the chance of a daisy being planted in the respective grid through spreading, \(C_B\), is one-fourth of the product of the growth rate \(G\), the universal birth rate \(B\) (defined at the start of the simulation), and a representation of how the population growth might be regulated by density dependent factors.</p>
	<p>\[C_{B, t} = \frac{1}{4} B G_{\theta_t} (1 - d_{t-1})\]</p>
	<p>A daisy might also randomly generate out of nowhere if the temperature condition is acceptable; this is especially important e.g. for the introduction of the first daisies to the planet. The chance of a daisy being planted in the respective grid randomly, \(C_R\), is the product of the growth rate \(G\), the universal random generation rate \(R\) (defined at the start of the simulation), and a representation of how the population growth might be regulated by density dependent factors.</p>
	<p>\[C_{R, t} = R G_{\theta_t} (1 - d_{t-1})\]</p>
	<p>Lastly, daisies die when they have lived for long enough. A daisy is more likely to die when the growth rate is low, which means the environment is less optimal to sustain this much daisies. The chance of a daisy to disappear into nowhere, \(C_D\), is the product of the difference between \(100\%\) and the growth rate \(G\) and the universal death rate \(D\) (defined at the start of the simulation). Notice that when \(G\) goes below zero, or when the temperature can no longer sustain the growth of daisies, all daisies quickly perish.</p>
	<p>\[C_{D, t} = D (1 - G_{\theta_t})\]</p>
	<p>We randomly simulate the process of growth and death of daisies to obtain the results below.</p>


	<h2>Results</h2>

	<h3>Without the Daisies</h3>
	<p>If daisies do not exist in the world, daisy coverage \(d\) remains in a constant zero, the average albedo of the planet \(a\) remains the same as the albedo of the ground \(a_g\), and the temperature of Daisyworld will always be proportional to the solar luminosity, which is increasing exponentially through time.</p>
	<p>This is exactly what happens when the temperature of Daisyworld was lower than the minimum temperature that can support daisy growth. The lack of daisies allowed the planet to heat up continuously without the feedback loop regulating the change.</p>

	<h3>Introduction of the Equilibrium</h3>
	<p>Everything changes when the first daisy started to bloom when the minimum temperature to sustain daisy growth is reached, or when the two graphs finally meet for the first time at \((\theta_\min, 0)\).</p>
	<p>The temperature increase is immediately surpressed by the increase in albedoes caused by the spawn of new daisies. It becomes clear that 
	<p class="ps">Unfortunately, this page is still not fully finished. Ms. Schenk, if you see this line, please contact me so that I can finish this page as soon as possible, hopefully within a day.</p>

	<h3>Fall of the Equilibrium</h3>


	<h2>Help</h2>

	<h3>Running the Program for the First Time</h3>
	<p>If you do not know how to run the program, please follow the following steps, or perhaps ask Google or ChatGPT.</p>
	<ol>
		<li>Install Python from <a href="https://www.python.org/downloads/release/python-3112/">the official website</a> or <a href="https://brew.sh">Homebrew</a>.</li>
		<li>Install the libraries with Terminal commands, including:
			<ul>
				<li>Tkinter (if Python is installed with Homebrew)</li>
				<li>Python Image Library: <code>pip3 install Pillow</code></li>
				<li>OpenCV: <code>pip3 install opencv-python</code></li>
				<li>NumPy: <code>pip3 install numpy</code></li>
				<li>Matplotlib: <code>pip3 install matplotlib</code></li>
			</ul>
		</li>
		<li>Run the Terminal command to start the program: <code>python3 <var>[drag daisyworld.py into the window]</var></code>
	</ol>

	<h3>Interface</h3>


	<h2>Related Knowledge</h2>

	<h3>Environmental Systems and Societies</h3>

	<h3>Geography</h3>

	<h3>Biology</h3>


	<h2>References</h2>
	<ol>
		<li>
			Kump, L. R., Kasting, J. F., & Crane, R. G. (2010). Daisyworld. In <i>The Earth System</i> (3rd ed., pp. 29–43). Pearson Prentice Hall.
		</li>
	</ol>
</article>
</body>
</html>